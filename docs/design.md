# Design

Hipster should be as composible as possible, allowing for the creation of high level abstractions when working with MIPS assembly code.

It should be possible, for instance, to create loops and functions within the DSL, and program in a style similar to C. Higher level abstractions than that should also be possible. Our goal is for it be easy to

- Create new abstractions
- Utilize existing abstractions
- Document and structure the MIPS output appropriately

The primary goal of Hipster is to provide the programmer with assembly level control, but give them the power to easily write and use higher level abstractions.

# Assembly Programming

Hipster programs can be nearly identical to MIPS assembly programs.

# Syscalls

## SPIM

https://en.wikipedia.org/wiki/SPIM#The_SPIM_operating_system

# Basic Blocks

A basic block in Hipster is constructed with the `MipsBlock` monad, which builds a list of instructions. We should probably use types to ensure that these actually do form basic blocks (no jumps or branches in the middle), much like what Hoopl does.

# Registers

In order to achieve composable abstractions Hipster will perform register allocation for you. However, it is also possible to ask for specific registers instead, which gives you all of the advantages of assembly languge.

# Commenting

Hipster allows you to inject comments. These comments will appear in the output, and can either appear between lines, or at the end of lines.

# Labels

Labels may be automatically generated by Hipster. Normally these labels are simply numbered, but it should also be possible to specify a prefix to these labels. The numbering for each prefix should be done individually.

Hipster will not allow you to write these prefixes manually.

# TODO

- Web and console interface for debugging
- Recording and playback of machine state
- MIPS parser to allow for conversion to Hipster, and debugging of ordinary MIPS code
- Code analysis using Hoopl
- Optimization passes (for instance unrolling loop structures nicely)
- Convert to LLVM for native compilation?
